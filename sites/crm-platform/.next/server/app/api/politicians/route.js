"use strict";(()=>{var e={};e.id=7689,e.ids=[7689],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},47776:(e,t,i)=>{i.r(t),i.d(t,{originalPathname:()=>h,patchFetch:()=>v,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var a={};i.r(a),i.d(a,{GET:()=>c,POST:()=>l});var r=i(49303),n=i(88716),o=i(60670),s=i(87070),p=i(8261);async function c(e){try{let{searchParams:t}=new URL(e.url),i=parseInt(t.get("page")||"1"),a=parseInt(t.get("limit")||"10"),r=t.get("search")||"",n=t.get("sortBy")||"name",o=t.get("sortOrder")||"asc",c=(i-1)*a,l=r?{OR:[{name:{contains:r,mode:"insensitive"}},{party:{contains:r,mode:"insensitive"}},{position:{contains:r,mode:"insensitive"}},{state:{contains:r,mode:"insensitive"}}]}:{},u=await p._.politician.count({where:l}),d=await p._.politician.findMany({where:l,skip:c,take:a,orderBy:{[n]:o}});return s.NextResponse.json({data:d,pagination:{total:u,page:i,limit:a,totalPages:Math.ceil(u/a)}})}catch(e){return console.error("Error fetching politicians:",e),s.NextResponse.json({error:"Failed to fetch politicians"},{status:500})}}async function l(e){try{let t=await e.json(),i=await p._.politician.create({data:t});return s.NextResponse.json(i,{status:201})}catch(e){return console.error("Error creating politician:",e),s.NextResponse.json({error:"Failed to create politician"},{status:500})}}let u=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/politicians/route",pathname:"/api/politicians",filename:"route",bundlePath:"app/api/politicians/route"},resolvedPagePath:"/home/bish/Downloads/sites/crm-platform/app/api/politicians/route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:g}=u,h="/api/politicians/route";function v(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},8261:(e,t,i)=>{i.d(t,{_:()=>r});var a=i(53524);let r=globalThis.prisma??new a.PrismaClient}};var t=require("../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),a=t.X(0,[8948,5972],()=>i(47776));module.exports=a})();