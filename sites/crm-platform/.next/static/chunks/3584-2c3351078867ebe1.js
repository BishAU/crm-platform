"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3584],{3584:(e,r,t)=>{t.d(r,{A:()=>g});var a=t(5155),n=t(2115),l=t(4055);let s=n.forwardRef(function(e,r){let{title:t,titleId:a,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},l),t?n.createElement("title",{id:a},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"}))}),i=n.forwardRef(function(e,r){let{title:t,titleId:a,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},l),t?n.createElement("title",{id:a},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}),o=n.forwardRef(function(e,r){let{title:t,titleId:a,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},l),t?n.createElement("title",{id:a},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}),c=n.forwardRef(function(e,r){let{title:t,titleId:a,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},l),t?n.createElement("title",{id:a},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}),d=n.forwardRef(function(e,r){let{title:t,titleId:a,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},l),t?n.createElement("title",{id:a},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}),m=n.forwardRef(function(e,r){let{title:t,titleId:a,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},l),t?n.createElement("title",{id:a},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}),u=n.forwardRef(function(e,r){let{title:t,titleId:a,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},l),t?n.createElement("title",{id:a},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))});function h(e){let{items:r,columns:t,onItemClick:n,entityType:l}=e,s=t.find(e=>e.isPrimary)||t[0],i=t.filter(e=>!e.isPrimary&&!1!==e.active);return(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:r.map((e,r)=>{var l,o,c,d;return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-ocean-200 overflow-hidden hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:()=>n(e),children:[(0,a.jsx)("div",{className:"aspect-video bg-ocean-50 flex items-center justify-center",children:(null===(o=t.find(e=>e.isImage))||void 0===o?void 0:null===(l=o.renderCell)||void 0===l?void 0:l.call(o,e[t.find(e=>e.isImage).field]))||(0,a.jsx)("div",{className:"text-4xl text-ocean-400",children:(null===(d=e[s.field])||void 0===d?void 0:null===(c=d.charAt(0))||void 0===c?void 0:c.toUpperCase())||"?"})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-ocean-900 mb-2",children:e[s.field]}),(0,a.jsx)("dl",{className:"space-y-1",children:i.map(r=>(0,a.jsxs)("div",{className:"flex text-sm",children:[(0,a.jsxs)("dt",{className:"text-ocean-500 w-1/3",children:[r.headerName,":"]}),(0,a.jsx)("dd",{className:"text-ocean-900 w-2/3",children:r.renderCell?r.renderCell(e[r.field]):e[r.field]||"-"})]},r.field))})]})]},r)})})}var f=t(6046),x=t(2994);function g(e){let{entityType:r,columns:t,rows:g,onSave:p,loading:v=!1,pagination:b,onPageChange:w,onSearch:j,onSort:N}=e,[k,y]=(0,n.useState)("grid"),[E,C]=(0,n.useState)(""),[L,A]=(0,n.useState)({}),[M,S]=(0,n.useState)(!1),[O,_]=(0,n.useState)(null),[I,R]=(0,n.useState)("asc"),[W,P]=(0,n.useState)(()=>(0,x.J1)(r,t.map(e=>e.field))),Z=(0,f.useRouter)(),B=(e,r)=>r.filter(e=>!1!==e.active).map(e=>e.field),J=t.filter(e=>B(r,t).includes(e.field)),V=e=>{"marketingList"===r?Z.push("/marketing/lists/".concat(e.id)):Z.push("/".concat(function(e){let r=e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase();for(let[e,t]of Object.entries({authority:"authorities",person:"people"}))if(r.endsWith(e))return r.slice(0,-e.length)+t;return r.endsWith("s")?r:"".concat(r,"s")}(r),"/").concat(e.id))},H=e=>{let r=O===e&&"asc"===I?"desc":"asc";_(e),R(r),N&&N(e,r)},U=e=>{C(e),j&&j(e)},z=e=>{w&&w(e)},$=J.sort((e,r)=>W.indexOf(e.field)-W.indexOf(r.field)),D=Array.isArray(g)?g:[];return(0,a.jsxs)("div",{className:"flex flex-col h-full bg-white rounded-lg shadow-sm border border-ocean-100",children:[(0,a.jsxs)("div",{className:"px-4 py-3 border-b border-ocean-100 bg-ocean-50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>y("grid"),className:"p-2 rounded-md ".concat("grid"===k?"bg-ocean-100 text-ocean-800":"text-ocean-600 hover:bg-ocean-50"),children:(0,a.jsx)(s,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>y("gallery"),className:"p-2 rounded-md ".concat("gallery"===k?"bg-ocean-100 text-ocean-800":"text-ocean-600 hover:bg-ocean-50"),children:(0,a.jsx)(i,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search...",value:E,onChange:e=>U(e.target.value),className:"w-64 pl-10 pr-4 py-2 border border-ocean-200 rounded-md focus:outline-none focus:ring-2 focus:ring-ocean-500 focus:border-ocean-500"}),(0,a.jsx)(o,{className:"absolute left-3 top-2.5 h-5 w-5 text-ocean-400"})]})]}),(0,a.jsx)("button",{onClick:()=>S(!M),className:"p-2 rounded-md ".concat(M?"bg-ocean-100 text-ocean-800":"text-ocean-600 hover:bg-ocean-50"),children:(0,a.jsx)(c,{className:"h-5 w-5"})})]}),M&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-ocean-50 rounded-md border border-ocean-100",children:(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-ocean-700 mb-1",children:e.headerName}),(0,a.jsx)("input",{type:"text",value:L[e.field]||"",onChange:r=>A(t=>({...t,[e.field]:r.target.value})),className:"w-full px-3 py-2 border border-ocean-200 rounded-md focus:outline-none focus:ring-2 focus:ring-ocean-500 focus:border-ocean-500"})]},e.field))})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:v?(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-ocean-600"})}):"grid"===k?(0,a.jsx)(l.JY,{onDragEnd:e=>{if(!e.destination)return;let t=Array.from(W),[a]=t.splice(e.source.index,1);t.splice(e.destination.index,0,a),P(t),(0,x.Ur)(r,t)},children:(0,a.jsx)("div",{className:"min-w-full divide-y divide-ocean-100",children:(0,a.jsx)(l.gL,{droppableId:"columns",direction:"horizontal",children:e=>(0,a.jsxs)("table",{className:"min-w-full divide-y divide-ocean-100",children:[(0,a.jsx)("thead",{className:"bg-ocean-50",ref:e.innerRef,children:(0,a.jsxs)("tr",{children:[$.map((e,r)=>(0,a.jsx)(l.sx,{draggableId:e.field,index:r,children:r=>(0,a.jsx)("th",{...r.draggableProps,...r.dragHandleProps,ref:r.innerRef,scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-ocean-700 uppercase tracking-wider cursor-pointer hover:bg-ocean-100",onClick:()=>H(e.field),children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("span",{children:e.headerName}),O===e.field&&(0,a.jsx)(d,{className:"h-4 w-4 transform ".concat("desc"===I?"rotate-180":"")})]})})},e.field)),e.placeholder]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-ocean-100",children:D.map((e,r)=>(0,a.jsx)("tr",{role:"row",onClick:()=>V(e),className:"hover:bg-ocean-50 cursor-pointer","aria-label":"row ".concat(r+1),children:$.map(r=>(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-ocean-800",children:r.renderCell?r.renderCell(e):e[r.field]},r.field))},r))})]})})})}):(0,a.jsx)(h,{items:D,columns:J,onItemClick:V,entityType:r})}),b&&(0,a.jsxs)("div",{className:"px-4 py-3 border-t border-ocean-100 bg-ocean-50 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-ocean-700",children:["Page ",b.page," of ",b.totalPages," (",b.totalItems," items)"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>z(b.page-1),disabled:1===b.page,className:"p-2 rounded-md ".concat(1===b.page?"text-ocean-300 cursor-not-allowed":"text-ocean-600 hover:bg-ocean-50"),children:(0,a.jsx)(m,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>z(b.page+1),disabled:b.page===b.totalPages,className:"p-2 rounded-md ".concat(b.page===b.totalPages?"text-ocean-300 cursor-not-allowed":"text-ocean-600 hover:bg-ocean-50"),children:(0,a.jsx)(u,{className:"h-5 w-5"})})]})]})]})}},2994:(e,r,t)=>{function a(e,r){let t=localStorage.getItem("".concat(e,"_field_order"));if(!t)return r;try{let e=JSON.parse(t),a=r.filter(r=>!e.includes(r));return[...e,...a]}catch(e){return console.error("Error parsing stored field order:",e),r}}function n(e,r){try{localStorage.setItem("".concat(e,"_field_order"),JSON.stringify(r))}catch(e){console.error("Error saving field order:",e)}}function l(e){let r=localStorage.getItem("".concat(e,"_field_visibility"));if(!r)return{};try{return JSON.parse(r)}catch(e){return console.error("Error parsing stored field visibility:",e),{}}}function s(e,r){try{localStorage.setItem("".concat(e,"_field_visibility"),JSON.stringify(r))}catch(e){console.error("Error saving field visibility:",e)}}t.d(r,{J1:()=>a,Ur:()=>n,Xd:()=>l,kL:()=>s})}}]);