"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9893],{9893:function(e,s,a){a.d(s,{Z:function(){return g}});var l=a(7437),t=a(2265),c=a(2762),n=a(2312),r=a(588),i=a(1556),d=a(4565),o=a(173),m=a(2700),u=a(3910),x=a(2417);function f(e){let{items:s,columns:a,onItemClick:t,entityType:c}=e,n=a.find(e=>e.isPrimary)||a[0],r=a.filter(e=>!e.isPrimary&&(0,x.Ly)(c,a.map(e=>e.field)).includes(e.field));return(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:s.map((e,s)=>{var c,i,d,o;return(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-ocean-200 overflow-hidden hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:()=>t(e),children:[(0,l.jsx)("div",{className:"aspect-video bg-ocean-50 flex items-center justify-center",children:(null===(i=a.find(e=>e.isImage))||void 0===i?void 0:null===(c=i.renderCell)||void 0===c?void 0:c.call(i,e[a.find(e=>e.isImage).field]))||(0,l.jsx)("div",{className:"text-4xl text-ocean-400",children:(null===(o=e[n.field])||void 0===o?void 0:null===(d=o.charAt(0))||void 0===d?void 0:d.toUpperCase())||"?"})}),(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-ocean-900 mb-2",children:e[n.field]}),(0,l.jsx)("dl",{className:"space-y-1",children:r.map(s=>(0,l.jsxs)("div",{className:"flex text-sm",children:[(0,l.jsxs)("dt",{className:"text-ocean-500 w-1/3",children:[s.headerName,":"]}),(0,l.jsx)("dd",{className:"text-ocean-900 w-2/3",children:s.renderCell?s.renderCell(e[s.field]):e[s.field]||"-"})]},s.field))})]})]},s)})})}var h=a(9376);function g(e){let{entityType:s,columns:a,rows:x,onSave:g,loading:p=!1,pagination:b,onPageChange:j,onSearch:v,onSort:N}=e,[w,y]=(0,t.useState)("grid"),[C,S]=(0,t.useState)(""),[k,I]=(0,t.useState)({}),[O,Z]=(0,t.useState)(!1),[P,E]=(0,t.useState)(null),[J,_]=(0,t.useState)("asc"),[A,L]=(0,t.useState)(a.map(e=>e.field)),z=(0,h.useRouter)();(0,t.useEffect)(()=>{let e=localStorage.getItem("columnOrder-".concat(s));e&&L(JSON.parse(e))},[s]),(0,t.useEffect)(()=>{localStorage.setItem("columnOrder-".concat(s),JSON.stringify(A))},[A,s]);let R=(e,s)=>s.filter(e=>!1!==e.active).map(e=>e.field),K=a.filter(e=>R(s,a).includes(e.field)),W=e=>{z.push("/".concat(function(e){let s=e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase();for(let[e,a]of Object.entries({authority:"authorities",person:"people"}))if(s.endsWith(e))return s.slice(0,-e.length)+a;return s.endsWith("s")?s:"".concat(s,"s")}(s),"/").concat(e.id))},$=e=>{let s=P===e&&"asc"===J?"desc":"asc";E(e),_(s),N&&N(e,s)},D=e=>{S(e),v&&v(e)},H=e=>{j&&j(e)},T=K.sort((e,s)=>A.indexOf(e.field)-A.indexOf(s.field));return(0,l.jsxs)("div",{className:"flex flex-col h-full bg-white rounded-lg shadow-sm border border-ocean-100",children:[(0,l.jsxs)("div",{className:"px-4 py-3 border-b border-ocean-100 bg-ocean-50",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("button",{onClick:()=>y("grid"),className:"p-2 rounded-md ".concat("grid"===w?"bg-ocean-100 text-ocean-800":"text-ocean-600 hover:bg-ocean-50"),children:(0,l.jsx)(n.Z,{className:"h-5 w-5"})}),(0,l.jsx)("button",{onClick:()=>y("gallery"),className:"p-2 rounded-md ".concat("gallery"===w?"bg-ocean-100 text-ocean-800":"text-ocean-600 hover:bg-ocean-50"),children:(0,l.jsx)(r.Z,{className:"h-5 w-5"})})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"text",placeholder:"Search...",value:C,onChange:e=>D(e.target.value),className:"w-64 pl-10 pr-4 py-2 border border-ocean-200 rounded-md focus:outline-none focus:ring-2 focus:ring-ocean-500 focus:border-ocean-500"}),(0,l.jsx)(i.Z,{className:"absolute left-3 top-2.5 h-5 w-5 text-ocean-400"})]})]}),(0,l.jsx)("button",{onClick:()=>Z(!O),className:"p-2 rounded-md ".concat(O?"bg-ocean-100 text-ocean-800":"text-ocean-600 hover:bg-ocean-50"),children:(0,l.jsx)(d.Z,{className:"h-5 w-5"})})]}),O&&(0,l.jsx)("div",{className:"mt-4 p-4 bg-ocean-50 rounded-md border border-ocean-100",children:(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:a.map(e=>(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-ocean-700 mb-1",children:e.headerName}),(0,l.jsx)("input",{type:"text",value:k[e.field]||"",onChange:s=>I(a=>({...a,[e.field]:s.target.value})),className:"w-full px-3 py-2 border border-ocean-200 rounded-md focus:outline-none focus:ring-2 focus:ring-ocean-500 focus:border-ocean-500"})]},e.field))})})]}),(0,l.jsx)("div",{className:"flex-1 overflow-auto",children:p?(0,l.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-ocean-600"})}):"grid"===w?(0,l.jsx)(c.Z5,{onDragEnd:e=>{if(!e.destination)return;let s=Array.from(A),[a]=s.splice(e.source.index,1);s.splice(e.destination.index,0,a),L(s)},children:(0,l.jsx)("div",{className:"min-w-full divide-y divide-ocean-100",children:(0,l.jsx)(c.bK,{droppableId:"columns",direction:"horizontal",children:e=>(0,l.jsxs)("table",{className:"min-w-full divide-y divide-ocean-100",children:[(0,l.jsx)("thead",{className:"bg-ocean-50",ref:e.innerRef,children:(0,l.jsxs)("tr",{children:[T.map((e,s)=>(0,l.jsx)(c._l,{draggableId:e.field,index:s,children:s=>(0,l.jsx)("th",{...s.draggableProps,...s.dragHandleProps,ref:s.innerRef,scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-ocean-700 uppercase tracking-wider cursor-pointer hover:bg-ocean-100",onClick:()=>$(e.field),children:(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)("span",{children:e.headerName}),P===e.field&&(0,l.jsx)(o.Z,{className:"h-4 w-4 transform ".concat("desc"===J?"rotate-180":"")})]})})},e.field)),e.placeholder]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-ocean-100",children:x.map((e,s)=>(0,l.jsx)("tr",{role:"row",onClick:()=>W(e),className:"hover:bg-ocean-50 cursor-pointer","aria-label":"row ".concat(s+1),children:T.map(s=>(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-ocean-800",children:s.renderCell?s.renderCell(e):e[s.field]},s.field))},s))})]})})})}):(0,l.jsx)(f,{items:x,columns:K,onItemClick:W,entityType:s})}),b&&(0,l.jsxs)("div",{className:"px-4 py-3 border-t border-ocean-100 bg-ocean-50 flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"text-sm text-ocean-700",children:["Page ",b.page," of ",b.totalPages," (",b.totalItems," items)"]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("button",{onClick:()=>H(b.page-1),disabled:1===b.page,className:"p-2 rounded-md ".concat(1===b.page?"text-ocean-300 cursor-not-allowed":"text-ocean-600 hover:bg-ocean-50"),children:(0,l.jsx)(m.Z,{className:"h-5 w-5"})}),(0,l.jsx)("button",{onClick:()=>H(b.page+1),disabled:b.page===b.totalPages,className:"p-2 rounded-md ".concat(b.page===b.totalPages?"text-ocean-300 cursor-not-allowed":"text-ocean-600 hover:bg-ocean-50"),children:(0,l.jsx)(u.Z,{className:"h-5 w-5"})})]})]})]})}},2417:function(e,s,a){a.d(s,{LK:function(){return t},Ly:function(){return n},zk:function(){return c}});let l="field-visibility";function t(){let e=localStorage.getItem(l);if(!e)return{};try{return JSON.parse(e)}catch(e){return{}}}function c(e,s,a){let c=t();c[e]||(c[e]={}),c[e][s]=a,localStorage.setItem(l,JSON.stringify(c))}function n(e,s){let a=t()[e]||{};if(0===Object.keys(a).length){let a=s.reduce((e,s)=>(e[s]=!0,e),{});{let s=t();s[e]=a,localStorage.setItem(l,JSON.stringify(s))}return s}return s.filter(e=>!0===a[e])}}}]);